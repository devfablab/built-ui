{"version":3,"file":"Typography.js","sources":["../../src/typography/Typography.tsx"],"sourcesContent":["import { ElementType, ReactNode } from 'react';\nimport styled from '@emotion/styled';\nimport type { BuiltUiTheme, BuiltUiThemePalette } from '../theme/createTheme';\n\nexport type TypographyVariantName = 'body1' | 'body2' | 'h1' | 'h2' | 'h3';\n\nexport type TypographyFontWeight = 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900;\n\ntype TypographyPaletteToken = {\n  [paletteGroupName in keyof BuiltUiThemePalette]: BuiltUiThemePalette[paletteGroupName] extends Record<string, unknown>\n    ? `${paletteGroupName & string}.${keyof BuiltUiThemePalette[paletteGroupName] & string}`\n    : never;\n}[keyof BuiltUiThemePalette];\n\nexport type TypographyProps<TypographyComponent extends ElementType> = {\n  component?: TypographyComponent;\n  variant?: TypographyVariantName;\n  fontFamily?: string;\n  fontWeight?: TypographyFontWeight;\n  fontVariationSettings?: string;\n  colorToken?: TypographyPaletteToken;\n  color?: 'primary' | 'secondary' | 'tertiary' | 'accent' | 'action' | 'warning' | 'bright' | 'light' | 'pure';\n  children: ReactNode;\n};\n\ntype TypographyBaseProps = {\n  variantName: TypographyVariantName;\n  overrideFontFamily?: string;\n  overrideFontWeight?: TypographyFontWeight;\n  overrideFontVariationSettings?: string;\n  overrideColorToken?: TypographyPaletteToken;\n  overrideColorValue?: string;\n};\n\nfunction resolvePaletteTokenToColorValue(\n  builtUiThemePalette: BuiltUiThemePalette,\n  typographyPaletteToken: TypographyPaletteToken,\n): string | undefined {\n  const tokenPartList = typographyPaletteToken.split('.');\n  let currentValue: unknown = builtUiThemePalette;\n\n  for (const tokenPart of tokenPartList) {\n    if (!currentValue || typeof currentValue !== 'object' || !(tokenPart in (currentValue as Record<string, unknown>)))\n      return undefined;\n    currentValue = (currentValue as Record<string, unknown>)[tokenPart];\n  }\n\n  return typeof currentValue === 'string' ? currentValue : undefined;\n}\n\nconst TypographyBase = styled('p', {\n  shouldForwardProp: (propertyName) =>\n    propertyName !== 'variantName' &&\n    propertyName !== 'overrideFontFamily' &&\n    propertyName !== 'overrideFontWeight' &&\n    propertyName !== 'overrideFontVariationSettings' &&\n    propertyName !== 'overrideColorToken' &&\n    propertyName !== 'overrideColorValue',\n})<TypographyBaseProps>(({\n  theme,\n  variantName,\n  overrideFontFamily,\n  overrideFontWeight,\n  overrideFontVariationSettings,\n  overrideColorToken,\n  overrideColorValue,\n}) => {\n  const builtUiTheme = theme as BuiltUiTheme;\n\n  const typographyVariant = builtUiTheme.typography.variants[variantName] ?? builtUiTheme.typography.variants.body1;\n\n  const resolvedFontFamily = overrideFontFamily ?? builtUiTheme.typography.fontFamily;\n  const resolvedFontWeight = overrideFontWeight ?? (typographyVariant.fontWeight as TypographyFontWeight);\n\n  const fontVariationSettingsFromTheme =\n    builtUiTheme.typography.getFontVariationSettingsByFontWeight?.(resolvedFontWeight);\n\n  const resolvedFontVariationSettings =\n    overrideFontVariationSettings ?? fontVariationSettingsFromTheme ?? `\"wght\" ${resolvedFontWeight}`;\n\n  const resolvedColorFromToken = overrideColorToken\n    ? resolvePaletteTokenToColorValue(builtUiTheme.palette, overrideColorToken)\n    : undefined;\n  const resolvedColorValue = overrideColorValue ?? resolvedColorFromToken ?? builtUiTheme.palette.text.primary;\n\n  const rem = (px: number): string => `${px / 16}rem`;\n\n  return {\n    fontFamily: resolvedFontFamily,\n    fontSize: rem(typographyVariant.fontSize),\n    fontWeight: resolvedFontWeight,\n    fontVariationSettings: resolvedFontVariationSettings,\n    lineHeight: typographyVariant.lineHeight,\n    letterSpacing: `${typographyVariant.letterSpacing}em`,\n    color: resolvedColorValue,\n  };\n});\n\nexport function Typography<TypographyComponent extends ElementType = 'p'>(\n  typographyProps: TypographyProps<TypographyComponent>,\n) {\n  const {\n    component,\n    variant,\n    fontFamily,\n    fontWeight,\n    fontVariationSettings,\n    colorToken,\n    color,\n    children,\n    ...remainingProps\n  } = typographyProps;\n\n  const Component = component ?? 'p';\n  const variantName = variant ?? 'body1';\n\n  return (\n    <TypographyBase\n      as={Component}\n      variantName={variantName}\n      overrideFontFamily={fontFamily}\n      overrideFontWeight={fontWeight}\n      overrideFontVariationSettings={fontVariationSettings}\n      overrideColorToken={colorToken}\n      overrideColorValue={color}\n      {...remainingProps}\n    >\n      {children}\n    </TypographyBase>\n  );\n}\n"],"names":["_jsx"],"mappings":"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"}